<div class="auth-container">
  <div class="auth-card" [class.register-mode]="isRegisterMode">

    <!-- Brand Panel (Dark Navy) -->
    <div class="brand-panel">
      <div class="brand-content">
        <div class="brand-icon mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" class="bi bi-inbox-fill" viewBox="0 0 16 16">
            <path d="M4.98 4a.5.5 0 0 0-.39.188L1.54 8H6a.5.5 0 0 1 .5.5 1.5 1.5 0 1 0 3 0A.5.5 0 0 1 10 8h4.46l-3.05-3.812A.5.5 0 0 0 11.02 4zm-1.17-.437A1.5 1.5 0 0 1 4.98 3h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 13H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .106-.374z"/>
          </svg>
        </div>
        <h2 class="brand-title">Complaint Management Portal</h2>
        <p class="brand-description">
          Don't hesitate, submit your complaint here and let it reach the right people quickly.
          Track its progress easily and be confident that your voice will be heard.
        </p>
      </div>
    </div>

    <!-- Form Panel (White) -->
    <div class="form-panel">

      <!-- Login Form -->
      <div class="login-form" [class.active]="!isRegisterMode">
        <h2 class="form-title">Welcome Back!</h2>
        <p class="form-subtitle">Sign in to continue</p>

        <form (ngSubmit)="onLogin()">
          <div class="form-group">
            <label for="login-email">Username or Email</label>
            <input
              type="text"
              id="login-email"
              [(ngModel)]="loginForm.email"
              name="email"
              placeholder="Enter your email"
              [disabled]="isLoading"
              required
              class="form-input"
            />
          </div>

          <div class="form-group">
            <label for="login-password">Password</label>
            <div class="password-wrapper">
              <input
                [type]="showPassword ? '' : 'password'"
                id="login-password"
                [(ngModel)]="loginForm.password"
                name="password"
                [placeholder]="showPassword? '' : 'Enter your password'"
                [disabled]="isLoading"
                required
                class="form-input"
              />
              <button
                type="button"
                class="password-toggle"
                (click)="togglePasswordVisibility('password')"
                [disabled]="isLoading"
              >
                @if (!showPassword) {
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
                    <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
                  </svg>
                }
                @if (showPassword) {
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7 7 0 0 0 2.79-.588M5.21 3.088A7 7 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474z"/>
                    <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
                  </svg>
                }
              </button>
            </div>
          </div>

          <div class="form-extras">
            <label class="checkbox-label">
              <input
                type="checkbox"
                [(ngModel)]="loginForm.rememberMe"
                name="rememberMe"
                [disabled]="isLoading"
              />
              Remember me
            </label>
            <a href="javascript:void(0)" (click)="goToForgotPassword()" class="forgot-link">
              Forgot Password?
            </a>
          </div>

          @if (errorMessage) {
            <div class="alert alert-danger">
              {{ errorMessage }}
            </div>
          }

          <button type="submit" class="submit-btn" [disabled]="isLoading">
            @if (!isLoading) {
              <span>Login</span>
            }
            @if (isLoading) {
              <span>Logging in...</span>
            }
          </button>

          <div class="form-footer">
            Don't have an account?
            <a href="javascript:void(0)" (click)="switchToRegister()">Register</a>
          </div>
        </form>
      </div>

      <!-- Register Form -->
      <div class="register-form" [class.active]="isRegisterMode">

        <!-- Brand Panel for Register
        <div class="brand-panel-register">
          <div class="brand-content">
            <div class="brand-icon mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" class="bi bi-inbox-fill" viewBox="0 0 16 16">
                <path d="M4.98 4a.5.5 0 0 0-.39.188L1.54 8H6a.5.5 0 0 1 .5.5 1.5 1.5 0 1 0 3 0A.5.5 0 0 1 10 8h4.46l-3.05-3.812A.5.5 0 0 0 11.02 4zm-1.17-.437A1.5 1.5 0 0 1 4.98 3h6.04a1.5 1.5 0 0 1 1.17.563l3.7 4.625a.5.5 0 0 1 .106.374l-.39 3.124A1.5 1.5 0 0 1 14.117 13H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .106-.374z"/>
              </svg>
            </div>
            <h2 class="brand-title">Complaint Management Portal</h2>
            <p class="brand-description">
              Don't hesitate, submit your complaint here and let it reach the right people quickly.
              Track its progress easily and be confident that your voice will be heard.
            </p>
          </div>
        </div> -->

        <h2 class="form-title">Create Account</h2>
        <p class="form-subtitle">Join us and get started!</p>

        <form (ngSubmit)="onRegister()">
          <div class="form-row">
            <div class="form-group">
              <label for="reg-username">Username *</label>
              <input
                type="text"
                id="reg-username"
                [(ngModel)]="registerForm.username"
                name="username"
                placeholder="Choose a username"
                [disabled]="isLoading"
                required
                class="form-input"
              />
            </div>

            <div class="form-group">
              <label for="reg-email">Email *</label>
              <input
                type="email"
                id="reg-email"
                [(ngModel)]="registerForm.email"
                name="email"
                placeholder="your.email@example.com"
                [disabled]="isLoading"
                required
                class="form-input"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="reg-fullname">Full Name *</label>
            <input
              type="text"
              id="reg-fullname"
              [(ngModel)]="registerForm.full_name"
              name="full_name"
              placeholder="Enter your full name"
              [disabled]="isLoading"
              required
              class="form-input"
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="reg-contact">Contact Number</label>
              <input
                type="tel"
                id="reg-contact"
                [(ngModel)]="registerForm.contact_number"
                name="contact_number"
                placeholder="Optional"
                [disabled]="isLoading"
                class="form-input"
              />
            </div>

            <div class="form-group">
              <label for="reg-department">Department</label>
              <input
                type="text"
                id="reg-department"
                [(ngModel)]="registerForm.department"
                name="department"
                placeholder="Optional"
                [disabled]="isLoading"
                class="form-input"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="reg-password">Password *</label>
              <div class="password-wrapper">
                <input
                  [type]="showPassword ? 'text' : 'password'"
                  id="reg-password"
                  [(ngModel)]="registerForm.password"
                  name="password"
                  placeholder="Create password"
                  [disabled]="isLoading"
                  required
                  class="form-input"
                />
                <button
                  type="button"
                  class="password-toggle"
                  (click)="togglePasswordVisibility('password')"
                  [disabled]="isLoading"
                >
                  @if (!showPassword) {
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
                      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
                    </svg>
                  }
                  @if (showPassword) {
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                      <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7 7 0 0 0 2.79-.588M5.21 3.088A7 7 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474z"/>
                      <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
                    </svg>
                  }
                </button>
              </div>
            </div>

            <div class="form-group">
              <label for="reg-password-confirm">Confirm Password *</label>
              <div class="password-wrapper">
                <input
                  [type]="showPasswordConfirmation ? 'text' : 'password'"
                  id="reg-password-confirm"
                  [(ngModel)]="registerForm.password_confirmation"
                  name="password_confirmation"
                  placeholder="Confirm password"
                  [disabled]="isLoading"
                  required
                  class="form-input"
                />
                <button
                  type="button"
                  class="password-toggle"
                  (click)="togglePasswordVisibility('confirmation')"
                  [disabled]="isLoading"
                >
                  @if (!showPasswordConfirmation) {
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
                      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
                    </svg>
                  }
                  @if (showPasswordConfirmation) {
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                      <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7 7 0 0 0 2.79-.588M5.21 3.088A7 7 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474z"/>
                      <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
                    </svg>
                  }
                </button>
              </div>
            </div>
          </div>

          @if (errorMessage) {
            <div class="alert alert-danger">
              {{ errorMessage }}
            </div>
          }

          @if (successMessage) {
            <div class="alert alert-success">
              {{ successMessage }}
            </div>
          }

          <button type="submit" class="submit-btn" [disabled]="isLoading">
            @if (!isLoading) {
              <span>Register</span>
            }
            @if (isLoading) {
              <span>Registering...</span>
            }
          </button>

          <div class="form-footer">
            Already have an account?
            <a href="javascript:void(0)" (click)="switchToLogin()">Login</a>
          </div>
        </form>
      </div>
    </div>

  </div>
</div>
