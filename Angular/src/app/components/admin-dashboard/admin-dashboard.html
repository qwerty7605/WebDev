<div class="admin-container">
  <div class="admin-header">
    <div>
      <h1>Admin Dashboard</h1>
      <p>Welcome, {{ adminName }}</p>
    </div>
    <button class="logout-button" (click)="logout()">Logout</button>
  </div>

  <div *ngIf="isLoading" class="loading">
    <p>Loading statistics...</p>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && statistics" class="dashboard-content">
    <div class="stats-grid">
      <div class="stat-card total">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-info">
          <h3>{{ statistics.total }}</h3>
          <p>Total Complaints</p>
        </div>
      </div>

      <div class="stat-card pending">
        <div class="stat-icon">ğŸ•</div>
        <div class="stat-info">
          <h3>{{ statistics.pending }}</h3>
          <p>Pending</p>
        </div>
      </div>

      <div class="stat-card progress">
        <div class="stat-icon">âš™ï¸</div>
        <div class="stat-info">
          <h3>{{ statistics.in_progress }}</h3>
          <p>In Progress</p>
        </div>
      </div>

      <div class="stat-card resolved">
        <div class="stat-icon">âœ…</div>
        <div class="stat-info">
          <h3>{{ statistics.resolved }}</h3>
          <p>Resolved</p>
        </div>
      </div>
    </div>

    <div class="actions-section">
      <div class="action-card" (click)="viewAllComplaints()">
        <div class="action-icon">ğŸ“‹</div>
        <h3>All Complaints</h3>
        <p>View and manage all complaints</p>
      </div>

      <div class="action-card" (click)="viewPendingComplaints()">
        <div class="action-icon">âš ï¸</div>
        <h3>Pending Complaints</h3>
        <p>Review complaints awaiting action</p>
      </div>
    </div>

    <div class="charts-section">
      <div class="chart-card">
        <h3>Complaints by Category</h3>
        <div class="chart-list">
          <div *ngFor="let cat of statistics.by_category" class="chart-item">
            <span class="chart-label">{{ cat.category?.category_name || 'Unknown' }}</span>
            <div class="chart-bar">
              <div class="chart-fill" [style.width.%]="(cat.count / statistics.total) * 100"></div>
            </div>
            <span class="chart-value">{{ cat.count }}</span>
          </div>
        </div>
      </div>

      <div class="chart-card">
        <h3>Complaints by Priority</h3>
        <div class="chart-list">
          <div *ngFor="let priority of statistics.by_priority" class="chart-item">
            <span class="chart-label">{{ priority.priority }}</span>
            <div class="chart-bar">
              <div class="chart-fill"
                   [style.width.%]="(priority.count / statistics.total) * 100"
                   [class.high]="priority.priority === 'High'"
                   [class.medium]="priority.priority === 'Medium'"
                   [class.low]="priority.priority === 'Low'"></div>
            </div>
            <span class="chart-value">{{ priority.count }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
